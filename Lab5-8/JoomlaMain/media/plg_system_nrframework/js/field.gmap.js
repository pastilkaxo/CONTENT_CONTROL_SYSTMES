jQuery(function(s){s(".nr_gmap").each(function(){function n(){var e=t.getCenter();google.maps.event.trigger(t,"resize"),t.setCenter(e)}function o(e){(a=void 0===a?new google.maps.Marker({position:e,map:t}):a).setPosition(e),e=e,s("#"+r).val(e.lat()+","+e.lng())}var t,a,l,r,i;el=s(this),l=el,r=l.attr("id"),i=((i=l.val()).length?i:l.data("coordinates")).split(","),t=new google.maps.Map(document.getElementById(r+"_map"),{center:{lat:parseFloat(i[0]),lng:parseFloat(i[1])},zoom:l.data("zoom")}),i.length&&(a=new google.maps.Marker({position:{lat:parseFloat(i[0]),lng:parseFloat(i[1])},map:t})),t.addListener("click",function(e){o(e.latLng)}),s(document).on("click",'a[href="#attrib-brand"]',function(e){n()}),void 0!==(showOn=l.closest(".control-group").data("showon"))&&s('input[name="'+showOn[0].field+'"]').change(function(){n()}),s(document).on("blur","#"+r,function(e){var n;n=l.val(),new RegExp(/^[-+]?([1-8]?\d(\.\d+)?|90(\.0+)?),\s*[-+]?(180(\.0+)?|((1[0-7]\d)|([1-9]?\d))(\.\d+)?)$/).test(n)?(newCoordinates=l.val().split(","),o(newCoordinates=new google.maps.LatLng({lat:parseFloat(newCoordinates[0]),lng:parseFloat(newCoordinates[1])})),t.panTo(newCoordinates)):(alert(Joomla.JText.strings.NR_WRONG_COORDINATES),l.val(i.join(",")))})})});

